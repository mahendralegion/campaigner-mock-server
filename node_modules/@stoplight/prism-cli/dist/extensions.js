"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.configureExtensionsFromSpec = void 0;
const $RefParser = require("@stoplight/json-schema-ref-parser");
const json_1 = require("@stoplight/json");
const lodash_1 = require("lodash");
const JSONSchemaFaker = require("json-schema-faker");
const prism_http_1 = require("@stoplight/prism-http");
async function configureExtensionsFromSpec(specFilePathOrObject) {
    const result = (0, json_1.decycle)(await new $RefParser().dereference(specFilePathOrObject));
    (0, prism_http_1.resetJSONSchemaGenerator)();
    (0, lodash_1.forOwn)((0, lodash_1.get)(result, 'x-json-schema-faker', {}), (value, option) => {
        if (option === 'locale') {
            return JSONSchemaFaker.locate('faker').setLocale(value);
        }
        JSONSchemaFaker.option((0, lodash_1.camelCase)(option), value);
    });
}
exports.configureExtensionsFromSpec = configureExtensionsFromSpec;
